<Project>
  <!-- Block inheritance of parent Directory.Build.props/targets. -->
  <PropertyGroup>
    <ImportDirectoryBuildProps>false</ImportDirectoryBuildProps>
    <ImportDirectoryBuildTargets>false</ImportDirectoryBuildTargets>
    <TargetDatabaseSet>True</TargetDatabaseSet>
    <ProjectGuid>{06b9ae4c-fea9-4d02-8e12-8bcd9d2b6904}</ProjectGuid>
  </PropertyGroup>
  <!-- Microsoft.Build.Sql SDK 2.1.0: the current GA SDK-style SQL project format.
       Released 2026-02-11. Requires .NET 8 or higher.
       All .sql files in the project folder are automatically included in the build. -->
  <Sdk Name="Microsoft.Build.Sql" Version="2.1.0" />
  <PropertyGroup>
    <!-- SQL Server 2025 (version 17.x) - current GA release -->
    <DSP>Microsoft.Data.Tools.Schema.Sql.Sql170DatabaseSchemaProvider</DSP>
  </PropertyGroup>

  <!-- Direct source-tree reference to SchemaTools: bypasses NuGet packaging entirely.
       Import the .targets file from the sibling project, overriding the UsingTask
       assembly path to point at the build output DLL instead of a NuGet package layout. -->
  <PropertyGroup>
    <SchemaToolsRoot>$([MSBuild]::NormalizePath('$(MSBuildProjectDirectory)', '..', 'schema-tools'))</SchemaToolsRoot>
    <SchemaTools_TFM Condition="'$(MSBuildRuntimeType)' != 'Core'">netstandard2.0</SchemaTools_TFM>
    <SchemaTools_TFM Condition="'$(MSBuildRuntimeType)' == 'Core'">net10.0</SchemaTools_TFM>
    <!-- Override the assembly path before the targets file is imported.
         The targets file uses $(MSBuildThisFileDirectory)..\tasks\$(SchemaTools_TFM)\SchemaTools.dll
         which resolves correctly for NuGet layout but not for source-tree layout.
         We re-define the UsingTask assembly via SchemaToolsTaskAssembly. -->
    <SchemaToolsTaskAssembly>$(SchemaToolsRoot)\bin\Debug\$(SchemaTools_TFM)\SchemaTools.dll</SchemaToolsTaskAssembly>
  </PropertyGroup>
  <Import Project="$(SchemaToolsRoot)\build\SchemaTools.targets" />
</Project>
